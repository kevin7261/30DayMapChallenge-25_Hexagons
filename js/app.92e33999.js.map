{"version":3,"file":"js/app.92e33999.js","mappings":"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","sources":["webpack://30DayMapChallenge-25_Hexagons/./src/App.vue","webpack://30DayMapChallenge-25_Hexagons/./src/App.vue?7ccd","webpack://30DayMapChallenge-25_Hexagons/./src/views/HomeView.vue","webpack://30DayMapChallenge-25_Hexagons/./src/tabs/MapTab.vue","webpack://30DayMapChallenge-25_Hexagons/./src/stores/dataStore.js","webpack://30DayMapChallenge-25_Hexagons/./src/tabs/MapTab.vue?15ab","webpack://30DayMapChallenge-25_Hexagons/./src/views/HomeView.vue?1da1","webpack://30DayMapChallenge-25_Hexagons/./src/router/index.js","webpack://30DayMapChallenge-25_Hexagons/./src/main.js","webpack://30DayMapChallenge-25_Hexagons/webpack/bootstrap","webpack://30DayMapChallenge-25_Hexagons/webpack/runtime/chunk loaded","webpack://30DayMapChallenge-25_Hexagons/webpack/runtime/compat get default export","webpack://30DayMapChallenge-25_Hexagons/webpack/runtime/define property getters","webpack://30DayMapChallenge-25_Hexagons/webpack/runtime/global","webpack://30DayMapChallenge-25_Hexagons/webpack/runtime/hasOwnProperty shorthand","webpack://30DayMapChallenge-25_Hexagons/webpack/runtime/jsonp chunk loading","webpack://30DayMapChallenge-25_Hexagons/webpack/startup"],"sourcesContent":["<script>\n  /**\n   * 🏠 App.vue - 應用程式主組件\n   *\n   * 功能說明：\n   * 1. 🏗️ 提供應用程式整體框架和佈局結構\n   * 2. ⏳ 管理全域載入狀態和進度顯示\n   * 3. 🚀 管理 Vue Router 的路由導航系統\n   * 4. 📱 實現響應式滿版佈局，無邊距和空隙\n   *\n   * 架構說明：\n   * - 內容層：路由視圖容器，動態顯示不同頁面組件\n   *\n   * 設計理念：\n   * - 滿版無邊距佈局設計\n   * - 模組化組件架構\n   */\n\n  export default {\n    name: 'App',\n  };\n</script>\n\n<template>\n  <!-- 🏠 App.vue - 主應用程式組件 (Main Application Component) -->\n  <!-- 提供應用程式整體框架，使用 Bootstrap 實現滿版無空隙佈局 -->\n  <div id=\"app\" class=\"d-flex flex-column vh-100\">\n    <!-- 📱 主要內容區域 (Main Content Area) -->\n    <div class=\"d-flex flex-column overflow-hidden\">\n      <router-view />\n    </div>\n  </div>\n</template>\n\n<style>\n  /**\n * 🎨 應用程式全域樣式 (Application Global Styles)\n *\n * 引入共用 CSS 並定義應用程式層級的樣式\n * 注意：大部分樣式已移至 common.css 中統一管理\n */\n\n  /* 📦 引入共用樣式表 (Import Common Stylesheets) */\n  @import './assets/css/common.css';\n\n  /* 📱 應用程式特定樣式 (App-Specific Styles) */\n  /* 其他樣式已整合至 common.css 中，避免重複定義 */\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=1e6196ea\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1e6196ea&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\n  /**\n   * 🏠 HomeView.vue - 主頁面組件 (Main Page Component)\n   *\n   * 這是應用程式的主頁面，顯示全屏世界地圖。\n   * 主要功能：\n   * - 顯示全屏世界地圖\n   * - 使用麥卡托投影\n   * - 響應式佈局設計\n   *\n   * 組件結構：\n   * - MapTab: 地圖顯示組件（全屏）\n   */\n\n  import MapTab from '../tabs/MapTab.vue';\n  import { useDataStore } from '@/stores/dataStore.js';\n\n  export default {\n    name: 'HomeView',\n    components: { MapTab },\n    setup() {\n      // 📦 存儲實例\n      const dataStore = useDataStore();\n\n      /**\n       * 🗺️ 設定地圖實例\n       * 將 D3.js 地圖實例傳遞給 dataStore\n       * @param {Object} map - D3.js 地圖實例（包含 svg, projection, path）\n       */\n      const setMapInstance = (map) => dataStore.setMapInstance(map);\n\n      return {\n        setMapInstance,\n      };\n    },\n  };\n</script>\n\n<template>\n  <!-- 🏠 全屏地圖容器 -->\n  <div class=\"vh-100 vw-100 overflow-hidden\">\n    <!-- 🗺️ 地圖組件（全屏） -->\n    <MapTab @map-ready=\"setMapInstance\" />\n  </div>\n</template>\n\n<style>\n  @import '../assets/css/common.css';\n</style>\n","<script>\n  /**\n   * ═══════════════════════════════════════════════════════════════════════════\n   * 🗺️ MapTab.vue - D3.js 台灣地圖組件\n   * ═══════════════════════════════════════════════════════════════════════════\n   *\n   * @fileoverview\n   * 這是一個基於 D3.js 的台灣地圖視覺化組件，同時顯示縣市界線和登革熱網格數據。\n   * 本組件負責載入、處理和渲染台灣直轄市、縣(市)界線和登革熱病例網格數據。\n   *\n   * ─────────────────────────────────────────────────────────────────────────\n   * 📋 核心功能\n   * ─────────────────────────────────────────────────────────────────────────\n   * 1. 縣市邊界渲染：\n   *    ✓ 載入直轄市、縣(市)界線1140318.geojson\n   *    ✓ 繪製所有台灣直轄市、縣(市)界線\n   *\n   * 2. 登革熱網格渲染：\n   *    ✓ 載入 dengue_grid_counts_1km_2023_land_only.geojson\n   *    ✓ 根據 level 屬性繪製5級風險等級網格\n   *    ✓ 只顯示病例數 > 0 的網格\n   *    ✓ 使用5級色票：深藍(1) → 綠(2) → 黃橙(3) → 橙(4) → 紅(5)（最上層）\n   *\n   * 3. 視覺元素：\n   *    ✓ 縣市界線：淺灰細邊框，無填充（底層）\n   *    ✓ 登革熱網格：5級色票填充，無邊框（最上層）\n   *    ✓ 白色地圖背景\n   *\n   * 4. 交互功能：\n   *    ✓ 滾輪縮放控制\n   *    ✓ 拖動平移導航\n   *    ✓ 滑鼠懸停顯示網格屬性資訊\n   *    ✓ 網格高亮效果\n   *\n   * ─────────────────────────────────────────────────────────────────────────\n   * 🎨 配色主題\n   * ─────────────────────────────────────────────────────────────────────────\n   * 白色      #ffffff  → 地圖背景\n   * 淺灰色    #cccccc  → 縣市邊框\n   * 無填充    none     → 縣市區域\n   * 5級色票            → 登革熱風險等級（最上層）\n   *   Level 1  #1a237e → 深藍色\n   *   Level 2  #4caf50 → 綠色\n   *   Level 3  #fbc02d → 黃橙色\n   *   Level 4  #ff6f00 → 橙色\n   *   Level 5  #d32f2f → 紅色\n   *\n   * ─────────────────────────────────────────────────────────────────────────\n   * 🛠️ 技術棧\n   * ─────────────────────────────────────────────────────────────────────────\n   * @requires vue                 - Vue 3.2+ (Composition API)\n   * @requires d3                  - D3.js 7.8+ (地圖繪製庫)\n   * @requires @/stores/dataStore  - Pinia 狀態管理\n   *\n   * ─────────────────────────────────────────────────────────────────────────\n   * 📁 數據來源\n   * ─────────────────────────────────────────────────────────────────────────\n   * 直轄市、縣(市)界線：直轄市、縣(市)界線1140318.geojson\n   * 登革熱網格數據：dengue_grid_counts_1km_2023_land_only.geojson\n   * 路徑：public/data/geojson/\n   *\n   * ─────────────────────────────────────────────────────────────────────────\n   * 🔧 使用方式\n   * ─────────────────────────────────────────────────────────────────────────\n   * <MapTab @map-ready=\"handleMapReady\" />\n   *\n   * @event map-ready - 地圖初始化完成時觸發，返回地圖實例\n   *\n   * ─────────────────────────────────────────────────────────────────────────\n   * 📝 維護者\n   * ─────────────────────────────────────────────────────────────────────────\n   * @author Kevin Cheng\n   * @version 4.0.0\n   * @since 2024\n   * @license MIT\n   *\n   * ═══════════════════════════════════════════════════════════════════════════\n   */\n\n  // ═══════════════════════════════════════════════════════════════════════════\n  // 📦 依賴導入 (Dependencies Import)\n  // ═══════════════════════════════════════════════════════════════════════════\n\n  // Vue 3 核心功能\n  import { ref, onMounted, onUnmounted, nextTick } from 'vue';\n\n  // D3.js 地圖庫\n  import * as d3 from 'd3';\n\n  // Pinia 狀態管理\n  import { useDataStore } from '@/stores/dataStore';\n\n  // CesiumJS 3D 地圖庫 - 將使用 CDN 版本，從 window.Cesium 獲取\n\n  // MapLibre GL JS 3D 地圖庫\n  import maplibregl from 'maplibre-gl';\n  import 'maplibre-gl/dist/maplibre-gl.css';\n\n  // ═══════════════════════════════════════════════════════════════════════════\n  // 🎯 組件定義 (Component Definition)\n  // ═══════════════════════════════════════════════════════════════════════════\n\n  export default {\n    name: 'MapTab',\n\n    // 組件觸發的事件\n    emits: [\n      'map-ready', // 地圖初始化完成時觸發，傳遞地圖實例\n    ],\n\n    /**\n     * ───────────────────────────────────────────────────────────────────────\n     * 🎬 組件設置函數 (Component Setup Function)\n     * ───────────────────────────────────────────────────────────────────────\n     * 使用 Vue 3 Composition API 設置組件邏輯\n     *\n     * @param {Object} _ - Props（本組件不使用）\n     * @param {Object} context - 設置上下文\n     * @param {Function} context.emit - 事件觸發函數\n     * @returns {Object} 返回模板可用的響應式數據和方法\n     */\n    setup(_, { emit }) {\n      // ═══════════════════════════════════════════════════════════════════════\n      // 📦 狀態管理與依賴 (State Management & Dependencies)\n      // ═══════════════════════════════════════════════════════════════════════\n\n      // Pinia 數據存儲（保留供未來擴展使用）\n      // eslint-disable-next-line no-unused-vars\n      const dataStore = useDataStore();\n\n      // ═══════════════════════════════════════════════════════════════════════\n      // 🗺️ 地圖相關變數 (Map-Related Variables)\n      // ═══════════════════════════════════════════════════════════════════════\n\n      /**\n       * 地圖 DOM 容器引用\n       * @type {Ref<HTMLElement|null>}\n       */\n      const mapContainer = ref(null);\n\n      /**\n       * D3.js SVG 元素\n       * @type {d3.Selection|null}\n       */\n      let svg = null;\n\n      /**\n       * D3.js 投影函數\n       * @type {d3.GeoProjection|null}\n       */\n      let projection = null;\n\n      /**\n       * D3.js 路徑生成器\n       * @type {d3.GeoPath|null}\n       */\n      let path = null;\n\n      /**\n       * D3.js 縮放行為\n       * @type {d3.ZoomBehavior|null}\n       */\n      let zoom = null;\n\n      /**\n       * SVG 主容器組\n       * @type {d3.Selection|null}\n       */\n      let g = null;\n\n      /**\n       * 工具提示元素\n       * @type {HTMLElement|null}\n       */\n      let tooltip = null;\n\n      /**\n       * CesiumJS Viewer 實例\n       * @type {any|null}\n       */\n      let cesiumViewer = null;\n\n      /**\n       * MapLibre GL Map 實例\n       * @type {maplibregl.Map|null}\n       */\n      let maplibreMap = null;\n\n      // ═══════════════════════════════════════════════════════════════════════\n      // 🎛️ 控制狀態 (Control States)\n      // ═══════════════════════════════════════════════════════════════════════\n\n      /**\n       * 地圖就緒狀態標記\n       * true = 地圖已初始化完成，false = 尚未初始化\n       * @type {Ref<boolean>}\n       */\n      const isMapReady = ref(false);\n\n      /**\n       * 地圖容器唯一 ID\n       * 使用隨機字符串確保多實例時不會衝突\n       * @type {Ref<string>}\n       */\n      const mapContainerId = ref(`leaflet-map-${Math.random().toString(36).substr(2, 9)}`);\n\n      /**\n       * 顯示模式\n       * 'map' = 使用地圖投影顯示（目前結果）\n       * 'grid' = 直接使用 grid_x, grid_y 繪製網格\n       * @type {Ref<string>}\n       */\n      const displayMode = ref('map');\n\n      // ═══════════════════════════════════════════════════════════════════════\n      // 📊 GeoJSON 數據儲存 (GeoJSON Data Storage)\n      // ═══════════════════════════════════════════════════════════════════════\n\n      /**\n       * 縣市 GeoJSON 數據\n       * 來源：直轄市、縣(市)界線1140318.geojson\n       * @type {Ref<Object|null>}\n       */\n      const countyData = ref(null);\n\n      /**\n       * 六角形網格 GeoJSON 數據\n       * 來源：pointy_final_with_levels_over5.geojson\n       * @type {Ref<Object|null>}\n       */\n      const hexData = ref(null);\n\n      /**\n       * 登革熱網格 GeoJSON 數據（保留以兼容）\n       * 來源：dengue_grid_counts_1km_2023_land_only.geojson\n       * @type {Ref<Object|null>}\n       */\n      const dengueData = ref(null);\n\n      /**\n       * 📥 載入直轄市、縣(市)界線 GeoJSON 數據\n       */\n      const loadCountyData = async () => {\n        try {\n          console.log('[MapTab] 開始載入直轄市、縣(市)界線 GeoJSON 數據...');\n\n          // 載入縣市 GeoJSON 檔案\n          const countyResponse = await fetch(\n            `${process.env.BASE_URL}data/geojson/直轄市、縣(市)界線1140318.geojson`\n          );\n\n          // 檢查響應\n          if (!countyResponse.ok) {\n            throw new Error(`直轄市、縣(市)界線數據載入失敗: HTTP ${countyResponse.status}`);\n          }\n\n          // 解析 JSON\n          countyData.value = await countyResponse.json();\n\n          console.log('[MapTab] 直轄市、縣(市)界線數據載入成功');\n          console.log('  - 縣市數量:', countyData.value.features?.length || 0);\n\n          return true;\n        } catch (error) {\n          console.error('[MapTab] 直轄市、縣(市)界線數據載入失敗:', error);\n          return false;\n        }\n      };\n\n      /**\n       * 🛠️ 創建工具提示元素\n       */\n      const createTooltip = () => {\n        if (!mapContainer.value) return;\n\n        // 移除已存在的工具提示\n        const existingTooltip = mapContainer.value.querySelector('.map-tooltip');\n        if (existingTooltip) {\n          existingTooltip.remove();\n        }\n\n        // 創建新的工具提示元素\n        tooltip = document.createElement('div');\n        tooltip.className = 'map-tooltip';\n        tooltip.style.position = 'absolute';\n        tooltip.style.pointerEvents = 'none';\n        tooltip.style.opacity = '0';\n        tooltip.style.padding = '4px 8px';\n\n        mapContainer.value.appendChild(tooltip);\n        console.log('[MapTab] 工具提示元素創建成功');\n      };\n\n      /**\n       * 📥 載入六角形網格 GeoJSON 數據\n       */\n      const loadHexData = async () => {\n        try {\n          console.log('[MapTab] 開始載入六角形網格 GeoJSON 數據...');\n\n          // 載入六角形網格 GeoJSON 檔案\n          const hexResponse = await fetch(\n            `${process.env.BASE_URL}data/geojson/pointy_final_with_levels_over5.geojson`\n          );\n\n          // 檢查響應\n          if (!hexResponse.ok) {\n            throw new Error(`六角形網格數據載入失敗: HTTP ${hexResponse.status}`);\n          }\n\n          // 解析 JSON\n          hexData.value = await hexResponse.json();\n\n          console.log('[MapTab] 六角形網格數據載入成功');\n          console.log('  - 網格數量:', hexData.value.features?.length || 0);\n\n          return true;\n        } catch (error) {\n          console.error('[MapTab] 六角形網格數據載入失敗:', error);\n          return false;\n        }\n      };\n\n      /**\n       * 📥 載入登革熱網格 GeoJSON 數據\n       */\n      // eslint-disable-next-line no-unused-vars\n      const loadDengueData = async () => {\n        try {\n          console.log('[MapTab] 開始載入登革熱網格 GeoJSON 數據...');\n\n          // 載入登革熱網格 GeoJSON 檔案\n          const dengueResponse = await fetch(\n            `${process.env.BASE_URL}data/geojson/dengue_grid_counts_1km_2023_land_only.geojson`\n          );\n\n          // 檢查響應\n          if (!dengueResponse.ok) {\n            throw new Error(`登革熱網格數據載入失敗: HTTP ${dengueResponse.status}`);\n          }\n\n          // 解析 JSON\n          dengueData.value = await dengueResponse.json();\n\n          console.log('[MapTab] 登革熱網格數據載入成功');\n          console.log('  - 網格數量:', dengueData.value.features?.length || 0);\n\n          return true;\n        } catch (error) {\n          console.error('[MapTab] 登革熱網格數據載入失敗:', error);\n          return false;\n        }\n      };\n\n      /**\n       * 🗺️ 繪製直轄市、縣(市)界線\n       */\n      const drawCounties = () => {\n        if (!g || !countyData.value) {\n          console.error(\n            '[MapTab] 無法繪製直轄市、縣(市)界線: g=',\n            !!g,\n            'countyData=',\n            !!countyData.value\n          );\n          return;\n        }\n\n        try {\n          console.log('[MapTab] 開始繪製直轄市、縣(市)界線 GeoJSON');\n\n          // 繪製所有縣市\n          g.selectAll('.county')\n            .data(countyData.value.features)\n            .enter()\n            .append('path')\n            .attr('d', path)\n            .attr('class', 'county')\n            .attr('fill', 'none') // 不填充\n            .attr('stroke', '#cccccc') // 淺灰色邊框\n            .attr('stroke-width', 0.5)\n            .attr('stroke-opacity', 0.6);\n\n          console.log('[MapTab] 直轄市、縣(市)界線 GeoJSON 繪製完成');\n        } catch (error) {\n          console.error('[MapTab] 直轄市、縣(市)界線 GeoJSON 繪製失敗:', error);\n        }\n      };\n\n      /**\n       * 🏗️ 創建網格畫布（不依賴地圖投影）\n       * 用於 grid 模式，直接使用 grid_x, grid_y 繪製\n       */\n      // eslint-disable-next-line no-unused-vars\n      const createGridCanvas = () => {\n        if (!mapContainer.value) return false;\n\n        const rect = mapContainer.value.getBoundingClientRect();\n        if (rect.width === 0 || rect.height === 0) {\n          console.warn('[MapTab] 容器尺寸為零，延遲初始化');\n          return false;\n        }\n\n        try {\n          // 清除舊的 SVG\n          if (svg) {\n            // 完全移除 zoom 行為\n            try {\n              if (zoom) {\n                svg.on('.zoom', null);\n                svg.call(zoom.on('zoom', null));\n              }\n            } catch (e) {\n              console.warn('[MapTab] 移除 zoom 行為時出錯:', e);\n            }\n            svg.remove();\n            svg = null;\n            g = null;\n            zoom = null;\n          }\n\n          const width = rect.width;\n          const height = rect.height;\n\n          // 創建 SVG 元素（不帶地圖投影）\n          svg = d3\n            .select(mapContainer.value)\n            .append('svg')\n            .attr('width', width)\n            .attr('height', height)\n            .style('background', '#ffffff'); // 白色背景\n\n          // 創建容器組（不使用地圖投影）\n          g = svg.append('g');\n\n          // 設置縮放行為（用於網格縮放）\n          zoom = d3\n            .zoom()\n            .scaleExtent([0.5, 50]) // 允許縮放 0.5x 到 50x\n            .on('zoom', (event) => {\n              if (g && g.node() && g.node().parentNode) {\n                g.attr('transform', event.transform);\n              }\n            });\n\n          svg.call(zoom);\n\n          // 重置縮放狀態，確保切換模式時不會受到之前模式的影響\n          svg.call(zoom.transform, d3.zoomIdentity);\n\n          // 創建工具提示元素\n          createTooltip();\n\n          isMapReady.value = true;\n\n          console.log('[MapTab] 網格畫布創建成功');\n          return true;\n        } catch (error) {\n          console.error('[MapTab] 網格畫布創建失敗:', error);\n          return false;\n        }\n      };\n\n      /**\n       * 🗺️ 繪製六角形網格（Grid 模式版本）\n       * 使用地圖投影，但沒有縣市界線\n       */\n      const drawHexGridOnly = () => {\n        if (!g || !hexData.value || !path) {\n          console.error(\n            '[MapTab] 無法繪製六角形網格: g=',\n            !!g,\n            'hexData=',\n            !!hexData.value,\n            'path=',\n            !!path\n          );\n          return;\n        }\n\n        try {\n          console.log('[MapTab] 開始繪製六角形網格（Grid 模式）');\n\n          // 先清除舊的圖層（包括縣市界線）\n          g.selectAll('.hex-grid').remove();\n          g.selectAll('.county').remove();\n\n          // 過濾掉人口數為0或ratio_China為0或沒有level的區域\n          const validFeatures = hexData.value.features.filter(\n            (d) =>\n              d.properties['人口數'] &&\n              d.properties['人口數'] > 0 &&\n              d.properties['ratio_China'] &&\n              d.properties['ratio_China'] > 0 &&\n              d.properties['level'] &&\n              d.properties['level'] >= 1 &&\n              d.properties['level'] <= 5\n          );\n\n          console.log('[MapTab] 使用 level 分類數據:', {\n            total: hexData.value.features.length,\n            valid: validFeatures.length, // 人口數 > 0 且 ratio_China > 0 且有 level\n          });\n\n          // 顏色方案：5級，基於中國國旗紅色 #DE2910 的漸變（淺→深）\n          const colors = [\n            '#f9d5d3', // level 1 - 很淺（中國紅的淡化版）\n            '#f4a9a3', // level 2 - 淺\n            '#ee6c5e', // level 3 - 中\n            '#de2910', // level 4 - 中國國旗紅\n            '#a51f0c', // level 5 - 深（中國紅的深化版）\n          ];\n\n          // 顏色映射函數：直接根據 level (1-5) 返回顏色\n          const getColor = (level) => {\n            if (!level || level < 1 || level > 5) return '#f0f0f0'; // 無數據的顏色\n            return colors[level - 1]; // level 1-5 對應 colors[0-4]\n          };\n\n          // 計算各級數量（根據 level 統計）\n          const classCounts = new Array(colors.length).fill(0);\n          validFeatures.forEach((d) => {\n            const level = d.properties['level'];\n            if (level >= 1 && level <= 5) {\n              classCounts[level - 1]++; // level 1-5 對應 classCounts[0-4]\n            }\n          });\n\n          // 按 level 排序（只考慮人口數 > 0 且 ratio_China > 0 且有 level 的區域）\n          const sortedHexes = validFeatures.sort((a, b) => {\n            const levelA = a.properties['level'] || 0;\n            const levelB = b.properties['level'] || 0;\n            return levelA - levelB;\n          });\n\n          console.log('[DEBUG] Grid 模式 - 總共要繪製的六角形網格數:', sortedHexes.length);\n          console.log(\n            '[DEBUG] Grid 模式 - 前 5 個網格:',\n            sortedHexes.slice(0, 5).map((d) => ({\n              level: d.properties['level'],\n              ratio_China: d.properties['ratio_China'],\n              color: getColor(d.properties['level']),\n            }))\n          );\n\n          // 繪製所有六角形網格\n          const hexPaths = g\n            .selectAll('.hex-grid')\n            .data(sortedHexes)\n            .enter()\n            .append('path')\n            .attr('d', path)\n            .attr('class', 'hex-grid')\n            .attr('fill', (d) => getColor(d.properties['level']))\n            .attr('fill-opacity', 0.8)\n            .attr('stroke', '#ffffff')\n            .attr('stroke-width', 0.5)\n            .style('cursor', 'pointer');\n\n          console.log('[DEBUG] Grid 模式 - 繪製了多少個 path 元素:', hexPaths.size());\n\n          hexPaths\n            .on('mouseover', function (event, d) {\n              d3.select(this).attr('fill-opacity', 1).attr('stroke-width', 2);\n              if (tooltip) {\n                const properties = d.properties;\n                // 格式化小數值為易讀格式\n                const formatValue = (key, value) => {\n                  if (value === null || value === undefined) return 'N/A';\n                  // 對於 ratio 開頭的欄位，格式化為小數\n                  if (key.startsWith('ratio_') && typeof value === 'number') {\n                    if (value === 0) return '0';\n                    if (value < 0.0001) {\n                      return value.toExponential(2);\n                    }\n                    if (value < 0.01) {\n                      return value.toFixed(5);\n                    }\n                    return value.toFixed(4);\n                  }\n                  return value;\n                };\n                // 顯示所有 properties 欄位\n                let tooltipHTML = '';\n                Object.keys(properties).forEach((key) => {\n                  const value = properties[key];\n                  tooltipHTML += `<div><strong>${key}:</strong> ${formatValue(key, value)}</div>`;\n                });\n                tooltip.innerHTML = tooltipHTML;\n                const [mouseX, mouseY] = d3.pointer(event, mapContainer.value);\n                tooltip.style.left = mouseX + 10 + 'px';\n                tooltip.style.top = mouseY - 10 + 'px';\n                tooltip.style.opacity = 1;\n              }\n            })\n            .on('mousemove', function (event) {\n              if (tooltip) {\n                const [mouseX, mouseY] = d3.pointer(event, mapContainer.value);\n                tooltip.style.left = mouseX + 10 + 'px';\n                tooltip.style.top = mouseY - 10 + 'px';\n              }\n            })\n            .on('mouseout', function () {\n              d3.select(this).attr('fill-opacity', 0.8).attr('stroke-width', 0.5);\n              if (tooltip) {\n                tooltip.style.opacity = 0;\n              }\n            });\n\n          // 繪製圖例\n          drawLegend(colors, classCounts);\n\n          console.log('[MapTab] 六角形網格（Grid 模式）繪製完成');\n        } catch (error) {\n          console.error('[MapTab] 六角形網格繪製失敗:', error);\n        }\n      };\n\n      /**\n       * 🗺️ 繪製網格（使用 grid_x, grid_y，不使用座標）\n       * 完全獨立的實現，不依賴地圖投影\n       */\n      // eslint-disable-next-line no-unused-vars\n      const drawGridOnly = () => {\n        if (!g || !dengueData.value) {\n          console.error('[MapTab] 無法繪製網格: g=', !!g, 'dengueData=', !!dengueData.value);\n          return;\n        }\n\n        try {\n          console.log('[MapTab] 開始繪製網格（使用 grid_x, grid_y）');\n\n          // 清除舊的網格\n          g.selectAll('.dengue-grid').remove();\n\n          // 顏色映射\n          const levelColors = {\n            0: '#e0e0e0', // 淡灰色（level 0）\n            1: '#1a237e', // 深藍色（深色）\n            2: '#4caf50', // 綠色（較亮）\n            3: '#fbc02d', // 黃橙色（金色）\n            4: '#ff6f00', // 橙色（明亮）\n            5: '#d32f2f', // 紅色（深色）\n          };\n\n          // 顏色映射函數\n          const getColorByLevel = (level) => {\n            if (level === 0 || level === null || level === undefined) {\n              return levelColors[0];\n            }\n            return levelColors[level] || levelColors[1];\n          };\n\n          // 透明度映射函數\n          const getOpacityByLevel = (level) => {\n            const levelNum = level || 0;\n            const opacityMap = {\n              0: 0.5,\n              1: 0.7,\n              2: 0.75,\n              3: 0.8,\n              4: 0.85,\n              5: 0.9,\n            };\n            return opacityMap[levelNum] || opacityMap[0];\n          };\n\n          // 過濾有 grid_x 和 grid_y 的數據\n          const gridsWithXY = dengueData.value.features.filter(\n            (d) =>\n              d.properties.grid_x !== null &&\n              d.properties.grid_x !== undefined &&\n              d.properties.grid_y !== null &&\n              d.properties.grid_y !== undefined\n          );\n\n          if (gridsWithXY.length === 0) {\n            console.error('[MapTab] 無法找到 grid_x 或 grid_y 屬性');\n            return;\n          }\n\n          // 計算 grid_x 和 grid_y 的範圍\n          const gridXValues = gridsWithXY.map((d) => d.properties.grid_x);\n          const gridYValues = gridsWithXY.map((d) => d.properties.grid_y);\n\n          const minX = d3.min(gridXValues);\n          const maxX = d3.max(gridXValues);\n          const minY = d3.min(gridYValues);\n          const maxY = d3.max(gridYValues);\n\n          console.log('[MapTab] Grid 範圍:', { minX, maxX, minY, maxY });\n\n          // 獲取 SVG 尺寸\n          const svgWidth = +svg.attr('width') || mapContainer.value.getBoundingClientRect().width;\n          const svgHeight =\n            +svg.attr('height') || mapContainer.value.getBoundingClientRect().height;\n\n          // 創建比例尺（帶有一些邊距）\n          const padding = 50;\n          const availableWidth = svgWidth - 2 * padding;\n          const availableHeight = svgHeight - 2 * padding;\n\n          // 計算 grid 範圍（包括邊界）\n          const rangeX = maxX - minX + 1;\n          const rangeY = maxY - minY + 1;\n\n          // 計算理論單元大小（根據可用空間和範圍）\n          const cellWidthFromX = availableWidth / rangeX;\n          const cellHeightFromY = availableHeight / rangeY;\n\n          // 使用較小的值作為統一的單元大小，確保所有網格都是正方形且能完整顯示\n          const cellSize = Math.min(cellWidthFromX, cellHeightFromY);\n\n          // 根據實際單元大小計算實際使用的空間\n          const actualWidth = cellSize * rangeX;\n          const actualHeight = cellSize * rangeY;\n\n          // 計算居中偏移量\n          const offsetX = (svgWidth - actualWidth) / 2;\n          const offsetY = (svgHeight - actualHeight) / 2;\n\n          // 創建比例尺（使用統一的單元大小，並居中顯示）\n          const scaleX = d3\n            .scaleLinear()\n            .domain([minX, maxX + 1])\n            .range([offsetX, offsetX + actualWidth]);\n          // Y 軸：grid_y 最小值在上方，最大值在下方（SVG 坐標系：y=0 在頂部，向下遞增）\n          const scaleY = d3\n            .scaleLinear()\n            .domain([minY, maxY + 1])\n            .range([offsetY, offsetY + actualHeight]);\n\n          console.log('[MapTab] Grid 單元大小:', {\n            cellSize,\n            rangeX,\n            rangeY,\n            cellWidthFromX,\n            cellHeightFromY,\n          });\n\n          // 網格單元大小（統一為正方形）\n          const cellWidth = cellSize;\n          const cellHeight = cellSize;\n\n          // 按 level 排序：level 0 在底層，level 1-5 在上層\n          const sortedGrids = gridsWithXY.sort((a, b) => {\n            const levelA = a.properties.level || 0;\n            const levelB = b.properties.level || 0;\n            return levelA - levelB;\n          });\n\n          // 繪製網格矩形\n          g.selectAll('.dengue-grid')\n            .data(sortedGrids)\n            .enter()\n            .append('rect')\n            .attr('class', 'dengue-grid')\n            .attr('x', (d) => scaleX(d.properties.grid_x))\n            .attr('y', (d) => scaleY(d.properties.grid_y))\n            .attr('width', cellWidth)\n            .attr('height', cellHeight)\n            .attr('fill', (d) => getColorByLevel(d.properties.level))\n            .attr('fill-opacity', (d) => getOpacityByLevel(d.properties.level))\n            .attr('stroke', 'none')\n            .style('cursor', 'pointer')\n            .on('mouseover', function (event, d) {\n              d3.select(this).attr('fill-opacity', 1);\n              if (tooltip) {\n                const properties = d.properties;\n                // 格式化小數值為易讀格式\n                const formatValue = (key, value) => {\n                  if (value === null || value === undefined) return 'N/A';\n                  // 對於 ratio 開頭的欄位，格式化為小數\n                  if (key.startsWith('ratio_') && typeof value === 'number') {\n                    if (value === 0) return '0';\n                    if (value < 0.0001) {\n                      return value.toExponential(2);\n                    }\n                    if (value < 0.01) {\n                      return value.toFixed(5);\n                    }\n                    return value.toFixed(4);\n                  }\n                  return value;\n                };\n                // 顯示所有 properties 欄位\n                let tooltipHTML = '';\n                Object.keys(properties).forEach((key) => {\n                  const value = properties[key];\n                  tooltipHTML += `<div><strong>${key}:</strong> ${formatValue(key, value)}</div>`;\n                });\n                tooltip.innerHTML = tooltipHTML;\n                const [mouseX, mouseY] = d3.pointer(event, mapContainer.value);\n                tooltip.style.left = mouseX + 10 + 'px';\n                tooltip.style.top = mouseY - 10 + 'px';\n                tooltip.style.opacity = 1;\n              }\n            })\n            .on('mousemove', function (event) {\n              if (tooltip) {\n                const [mouseX, mouseY] = d3.pointer(event, mapContainer.value);\n                tooltip.style.left = mouseX + 10 + 'px';\n                tooltip.style.top = mouseY - 10 + 'px';\n              }\n            })\n            .on('mouseout', function (event, d) {\n              const level = d.properties.level || 0;\n              d3.select(this).attr('fill-opacity', getOpacityByLevel(level));\n              if (tooltip) {\n                tooltip.style.opacity = 0;\n              }\n            });\n\n          console.log('[MapTab] 網格繪製完成');\n          console.log('  - 網格數量:', sortedGrids.length);\n        } catch (error) {\n          console.error('[MapTab] 網格繪製失敗:', error);\n        }\n      };\n\n      /**\n       * 🎛️ 切換顯示模式\n       * @param {string} mode - 'map' 或 'grid'\n       */\n      const toggleDisplayMode = async (mode) => {\n        displayMode.value = mode;\n        console.log('[MapTab] 切換顯示模式:', mode);\n\n        if (displayMode.value === 'map') {\n          // 地圖模式：需要地圖投影，載入縣市界線和六角形網格\n          if (!countyData.value) {\n            await loadCountyData();\n          }\n          if (!hexData.value) {\n            await loadHexData();\n          }\n\n          // 清除舊的 SVG（如果從其他模式切換過來）\n          if (svg && !projection) {\n            // 完全移除 zoom 行為\n            try {\n              if (zoom) {\n                svg.on('.zoom', null);\n                svg.call(zoom.on('zoom', null));\n              }\n            } catch (e) {\n              console.warn('[MapTab] 移除 zoom 行為時出錯:', e);\n            }\n            svg.remove();\n            svg = null;\n            g = null;\n            zoom = null;\n          }\n\n          if (!projection || !path) {\n            // 如果還沒有創建地圖，先創建\n            const rect = mapContainer.value.getBoundingClientRect();\n            if (rect.width > 0 && rect.height > 0) {\n              const width = rect.width;\n              const height = rect.height;\n\n              // 清除舊的 SVG\n              if (svg) {\n                // 取消所有 zoom 事件綁定\n                if (zoom) {\n                  svg.on('.zoom', null);\n                  svg.on('mousedown.zoom', null);\n                  svg.on('mousemove.zoom', null);\n                  svg.on('mouseup.zoom', null);\n                  svg.on('touchstart.zoom', null);\n                  svg.on('touchmove.zoom', null);\n                  svg.on('touchend.zoom', null);\n                  svg.on('wheel.zoom', null);\n                }\n                svg.remove();\n                svg = null;\n                g = null;\n                zoom = null;\n              }\n\n              // 創建 SVG 和地圖投影\n              svg = d3\n                .select(mapContainer.value)\n                .append('svg')\n                .attr('width', width)\n                .attr('height', height)\n                .style('background', '#ffffff');\n\n              projection = d3\n                .geoMercator()\n                .center([121, 23.5])\n                .scale(12000)\n                .translate([width / 2, height / 2]);\n\n              path = d3.geoPath().projection(projection);\n              g = svg.append('g');\n\n              zoom = d3\n                .zoom()\n                .scaleExtent([0.5, 50])\n                .on('zoom', (event) => {\n                  if (g) {\n                    g.attr('transform', event.transform);\n                  }\n                });\n\n              svg.call(zoom);\n\n              // 重置縮放狀態，確保切換模式時不會受到之前模式的影響\n              svg.call(zoom.transform, d3.zoomIdentity);\n\n              createTooltip();\n              isMapReady.value = true;\n            }\n          } else {\n            // 如果已經創建了地圖，重置縮放狀態\n            if (svg && zoom) {\n              svg.call(zoom.transform, d3.zoomIdentity);\n            }\n          }\n          // 繪製縣市界線和六角形網格\n          drawCounties();\n          drawHexGrid();\n        } else if (displayMode.value === 'grid') {\n          // Grid 模式：載入六角形網格數據，需要地圖投影來繪製\n          if (!hexData.value) {\n            await loadHexData();\n          }\n          // 清除縣市界線數據（不需要）\n          countyData.value = null;\n\n          // 清除舊的 SVG（如果從地圖模式切換過來）\n          if (svg && !projection) {\n            // 取消 zoom 事件綁定\n            if (zoom) {\n              svg.on('.zoom', null);\n            }\n            svg.remove();\n            svg = null;\n            g = null;\n            zoom = null;\n          }\n\n          if (!projection || !path) {\n            // 如果還沒有創建地圖，先創建\n            const rect = mapContainer.value.getBoundingClientRect();\n            if (rect.width > 0 && rect.height > 0) {\n              const width = rect.width;\n              const height = rect.height;\n\n              // 清除舊的 SVG\n              if (svg) {\n                // 取消所有 zoom 事件綁定\n                if (zoom) {\n                  svg.on('.zoom', null);\n                  svg.on('mousedown.zoom', null);\n                  svg.on('mousemove.zoom', null);\n                  svg.on('mouseup.zoom', null);\n                  svg.on('touchstart.zoom', null);\n                  svg.on('touchmove.zoom', null);\n                  svg.on('touchend.zoom', null);\n                  svg.on('wheel.zoom', null);\n                }\n                svg.remove();\n                svg = null;\n                g = null;\n                zoom = null;\n              }\n\n              // 創建 SVG 和地圖投影（Grid 模式也需要投影來繪製六角形）\n              svg = d3\n                .select(mapContainer.value)\n                .append('svg')\n                .attr('width', width)\n                .attr('height', height)\n                .style('background', '#ffffff');\n\n              projection = d3\n                .geoMercator()\n                .center([121, 23.5])\n                .scale(12000)\n                .translate([width / 2, height / 2]);\n\n              path = d3.geoPath().projection(projection);\n              g = svg.append('g');\n\n              zoom = d3\n                .zoom()\n                .scaleExtent([0.5, 50])\n                .on('zoom', (event) => {\n                  if (g) {\n                    g.attr('transform', event.transform);\n                  }\n                });\n\n              svg.call(zoom);\n\n              // 重置縮放狀態\n              svg.call(zoom.transform, d3.zoomIdentity);\n\n              createTooltip();\n              isMapReady.value = true;\n            }\n          } else {\n            // 如果已經創建了地圖，重置縮放狀態\n            if (svg && zoom) {\n              svg.call(zoom.transform, d3.zoomIdentity);\n            }\n          }\n\n          // 繪製六角形網格（Grid 模式，不顯示縣市界線）\n          drawHexGridOnly();\n        } else if (displayMode.value === 'cesium3d') {\n          // CesiumJS 3D 模式\n          if (!hexData.value) {\n            await loadHexData();\n          }\n          // 清理舊的 SVG 或其他視圖\n          cleanupOtherViews();\n          // 初始化 CesiumJS 3D 地圖\n          await initCesium3D();\n        } else if (displayMode.value === 'maplibre3d') {\n          // MapLibre 3D 模式\n          if (!hexData.value) {\n            await loadHexData();\n          }\n          // 清理舊的 SVG 或其他視圖\n          cleanupOtherViews();\n          // 初始化 MapLibre 3D 地圖\n          await initMapLibre3D();\n        }\n      };\n\n      /**\n       * 🧹 清理其他視圖（SVG、Cesium、MapLibre）\n       */\n      const cleanupOtherViews = () => {\n        // 清理 SVG\n        if (svg) {\n          try {\n            if (zoom) {\n              svg.on('.zoom', null);\n            }\n            svg.remove();\n          } catch (e) {\n            console.warn('[MapTab] 清理 SVG 時出錯:', e);\n          }\n          svg = null;\n          g = null;\n          zoom = null;\n          projection = null;\n          path = null;\n        }\n\n        // 清理 Cesium Viewer\n        if (cesiumViewer) {\n          try {\n            cesiumViewer.destroy();\n          } catch (e) {\n            console.warn('[MapTab] 清理 Cesium Viewer 時出錯:', e);\n          }\n          cesiumViewer = null;\n        }\n\n        // 清理 MapLibre Map\n        if (maplibreMap) {\n          try {\n            maplibreMap.remove();\n          } catch (e) {\n            console.warn('[MapTab] 清理 MapLibre Map 時出錯:', e);\n          }\n          maplibreMap = null;\n        }\n\n        // 清空容器\n        if (mapContainer.value) {\n          mapContainer.value.innerHTML = '';\n        }\n      };\n\n      /**\n       * 🌍 初始化 CesiumJS 3D 地圖\n       */\n      const initCesium3D = async () => {\n        try {\n          console.log('[MapTab] 開始初始化 CesiumJS 3D 地圖');\n\n          if (!mapContainer.value || !hexData.value) {\n            console.error('[MapTab] 無法初始化 CesiumJS: 容器或數據不存在');\n            return;\n          }\n\n          // 檢查 Cesium 是否已載入（從 CDN）\n          if (typeof window.Cesium === 'undefined') {\n            console.error('[MapTab] CesiumJS 尚未載入，請確保已引入 CDN 腳本');\n            return;\n          }\n\n          // eslint-disable-next-line no-undef\n          const Cesium = window.Cesium;\n\n          // 設置 Cesium Ion 訪問令牌\n          Cesium.Ion.defaultAccessToken =\n            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxYjJiZjlhZC1mZDNkLTRiZWEtYjExNy1iZDI1OWQ5ZmJlZmEiLCJpZCI6MzU1MDgxLCJpYXQiOjE3NjE3MTc5NTl9.ivNUz20WJNOvyTB6vzB8xHNWNSzgl06vBAGOuZLNKs4';\n\n          // 創建世界地形提供者（需要 Ion token）\n          const worldTerrain = await Cesium.createWorldTerrainAsync();\n\n          // 創建 Cesium Viewer（使用世界地形）\n          cesiumViewer = new Cesium.Viewer(mapContainer.value, {\n            terrainProvider: worldTerrain,\n            baseLayerPicker: false,\n            geocoder: false,\n            homeButton: false,\n            infoBox: false,\n            sceneModePicker: false,\n            selectionIndicator: false,\n            timeline: false,\n            animation: false,\n            fullscreenButton: false,\n            vrButton: false,\n            navigationHelpButton: false,\n          });\n\n          // 設置視角到台灣\n          cesiumViewer.camera.setView({\n            destination: Cesium.Cartesian3.fromDegrees(121.0, 23.5, 500000),\n            orientation: {\n              heading: 0.0,\n              pitch: -0.5,\n              roll: 0.0,\n            },\n          });\n\n          // 顏色方案：根據 level (1-5) 返回顏色\n          const getColorByLevel = (level) => {\n            const colors = {\n              1: Cesium.Color.fromCssColorString('#f9d5d3'), // level 1 - 很淺\n              2: Cesium.Color.fromCssColorString('#f4a9a3'), // level 2 - 淺\n              3: Cesium.Color.fromCssColorString('#ee6c5e'), // level 3 - 中\n              4: Cesium.Color.fromCssColorString('#de2910'), // level 4 - 中國國旗紅\n              5: Cesium.Color.fromCssColorString('#a51f0c'), // level 5 - 深\n            };\n            return colors[level] || Cesium.Color.fromCssColorString('#f0f0f0');\n          };\n\n          // 計算六角形網格的寬度（米）\n          // 從第一個有效的六角形計算寬度（相對頂點之間的距離）\n          const calculateHexWidth = () => {\n            if (!hexData.value || !hexData.value.features || hexData.value.features.length === 0) {\n              return 6000; // 默認值，如果無法計算\n            }\n\n            const firstHex = hexData.value.features.find(\n              (f) =>\n                f.properties.level >= 1 &&\n                f.properties.level <= 5 &&\n                f.geometry &&\n                f.geometry.coordinates[0]\n            );\n\n            if (!firstHex || !firstHex.geometry.coordinates[0]) {\n              return 6000; // 默認值\n            }\n\n            const coords = firstHex.geometry.coordinates[0];\n            if (coords.length < 4) {\n              return 6000; // 默認值\n            }\n\n            // 計算相對頂點之間的距離（六角形寬度）\n            const p1 = coords[0];\n            const p4 = coords[3]; // 相對頂點\n\n            // 使用 Haversine 公式計算距離（米）\n            const R = 6371000; // 地球半徑（米）\n            const lat1 = (p1[1] * Math.PI) / 180;\n            const lat4 = (p4[1] * Math.PI) / 180;\n            const dLat = ((p4[1] - p1[1]) * Math.PI) / 180;\n            const dLon = ((p4[0] - p1[0]) * Math.PI) / 180;\n            const a =\n              Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(lat1) * Math.cos(lat4) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n            const width = R * c;\n\n            console.log('[MapTab] CesiumJS 3D - 計算的六角形寬度（米）:', width);\n            return width;\n          };\n\n          const hexWidth = calculateHexWidth();\n\n          // 將 level 轉換為高度（米）\n          // level 1 的高度 = 六角形寬度\n          // level 5 的高度 = level 1 的 5 倍 = 六角形寬度的 5 倍\n          const levelToHeight = (level) => {\n            if (!level || level < 1 || level > 5) return 0;\n            // level 1 = hexWidth, level 2 = 2 * hexWidth, ..., level 5 = 5 * hexWidth\n            return level * hexWidth;\n          };\n\n          // 過濾有效的 features（level 1-5）\n          const validFeatures = hexData.value.features.filter(\n            (d) =>\n              d.properties.level &&\n              d.properties.level >= 1 &&\n              d.properties.level <= 5 &&\n              d.geometry &&\n              d.geometry.type === 'Polygon'\n          );\n\n          console.log('[MapTab] CesiumJS 3D - 有效的 features 數量:', validFeatures.length);\n\n          // 為每個 feature 創建 3D 柱狀圖（高度由 level 決定）\n          validFeatures.forEach((feature) => {\n            const level = feature.properties.level;\n            const coordinates = feature.geometry.coordinates[0]; // Polygon 的第一個環\n            const extrudedHeight = levelToHeight(level);\n\n            // 將 GeoJSON 座標轉換為 Cesium 的 Cartesian3 數組\n            // 基礎座標應該在地面（高度 0），然後通過 extrudedHeight 向上擠壓\n            const positions = coordinates.map((coord) =>\n              Cesium.Cartesian3.fromDegrees(coord[0], coord[1], 0)\n            );\n\n            // 創建擠壓多邊形實體（柱狀圖效果）\n            cesiumViewer.entities.add({\n              polygon: {\n                hierarchy: positions,\n                material: getColorByLevel(level).withAlpha(0.8),\n                // 擠壓高度：從地面（height=0）到目標高度（extrudedHeight）\n                height: 0, // 基礎高度（地面）\n                extrudedHeight: extrudedHeight, // 擠壓到的高度\n                // 不顯示邊框\n                outline: false,\n              },\n              properties: feature.properties,\n            });\n          });\n\n          // 添加點擊事件顯示屬性信息\n          const handler = new Cesium.ScreenSpaceEventHandler(cesiumViewer.scene.canvas);\n          handler.setInputAction((click) => {\n            const pickedObject = cesiumViewer.scene.pick(click.position);\n            if (Cesium.defined(pickedObject) && pickedObject.id && pickedObject.id.properties) {\n              const properties = pickedObject.id.properties;\n              let info = 'Properties:\\n';\n              // 顯示所有屬性\n              for (const key in properties) {\n                if (Object.prototype.hasOwnProperty.call(properties, key)) {\n                  info += `${key}: ${properties[key].getValue()}\\n`;\n                }\n              }\n              console.log('[MapTab] CesiumJS - 點擊的實體信息:', info);\n            }\n          }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n          isMapReady.value = true;\n          console.log('[MapTab] CesiumJS 3D 地圖初始化完成');\n        } catch (error) {\n          console.error('[MapTab] CesiumJS 3D 地圖初始化失敗:', error);\n        }\n      };\n\n      /**\n       * 🗺️ 初始化 MapLibre GL 3D 地圖\n       */\n      const initMapLibre3D = async () => {\n        try {\n          console.log('[MapTab] 開始初始化 MapLibre GL 3D 地圖');\n\n          if (!mapContainer.value || !hexData.value) {\n            console.error('[MapTab] 無法初始化 MapLibre GL: 容器或數據不存在');\n            return;\n          }\n\n          // 創建 MapLibre Map（使用 Carto Dark 底圖）\n          maplibreMap = new maplibregl.Map({\n            container: mapContainer.value,\n            style: {\n              version: 8,\n              sources: {\n                carto: {\n                  type: 'raster',\n                  tiles: [\n                    'https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n                    'https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n                    'https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n                  ],\n                  tileSize: 256,\n                  attribution:\n                    '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n                },\n              },\n              layers: [\n                {\n                  id: 'carto-dark-layer',\n                  type: 'raster',\n                  source: 'carto',\n                  minzoom: 0,\n                  maxzoom: 22,\n                },\n              ],\n            },\n            center: [121.0, 23.5], // 台灣中心\n            zoom: 8,\n            pitch: 45, // 傾斜角度，創建 3D 效果\n            bearing: 0,\n            antialias: true,\n          });\n\n          // 等待地圖載入完成\n          maplibreMap.on('load', () => {\n            console.log('[MapTab] MapLibre GL 地圖載入完成');\n\n            // 計算六角形網格的寬度（米）\n            // 從第一個有效的六角形計算寬度（相對頂點之間的距離）\n            const calculateHexWidth = () => {\n              if (\n                !hexData.value ||\n                !hexData.value.features ||\n                hexData.value.features.length === 0\n              ) {\n                return 6000; // 默認值，如果無法計算\n              }\n\n              const firstHex = hexData.value.features.find(\n                (f) =>\n                  f.properties.level >= 1 &&\n                  f.properties.level <= 5 &&\n                  f.geometry &&\n                  f.geometry.coordinates[0]\n              );\n\n              if (!firstHex || !firstHex.geometry.coordinates[0]) {\n                return 6000; // 默認值\n              }\n\n              const coords = firstHex.geometry.coordinates[0];\n              if (coords.length < 4) {\n                return 6000; // 默認值\n              }\n\n              // 計算相對頂點之間的距離（六角形寬度）\n              const p1 = coords[0];\n              const p4 = coords[3]; // 相對頂點\n\n              // 使用 Haversine 公式計算距離（米）\n              const R = 6371000; // 地球半徑（米）\n              const lat1 = (p1[1] * Math.PI) / 180;\n              const lat4 = (p4[1] * Math.PI) / 180;\n              const dLat = ((p4[1] - p1[1]) * Math.PI) / 180;\n              const dLon = ((p4[0] - p1[0]) * Math.PI) / 180;\n              const a =\n                Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n                Math.cos(lat1) * Math.cos(lat4) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n              const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n              const width = R * c;\n\n              console.log('[MapTab] MapLibre GL 3D - 計算的六角形寬度（米）:', width);\n              return width;\n            };\n\n            const hexWidth = calculateHexWidth();\n\n            // 將 level 轉換為高度（米）\n            // level 1 的高度 = 六角形寬度\n            // level 5 的高度 = level 1 的 5 倍 = 六角形寬度的 5 倍\n            const levelToHeight = (level) => {\n              if (!level || level < 1 || level > 5) return 0;\n              // level 1 = hexWidth, level 2 = 2 * hexWidth, ..., level 5 = 5 * hexWidth\n              return level * hexWidth;\n            };\n\n            // 顏色方案：根據 level (1-5) 返回顏色\n            const getColorByLevel = (level) => {\n              const colors = {\n                1: '#f9d5d3', // level 1 - 很淺\n                2: '#f4a9a3', // level 2 - 淺\n                3: '#ee6c5e', // level 3 - 中\n                4: '#de2910', // level 4 - 中國國旗紅\n                5: '#a51f0c', // level 5 - 深\n              };\n              return colors[level] || '#f0f0f0';\n            };\n\n            // 準備 GeoJSON 數據，為每個 feature 添加高度屬性\n            const featuresWithHeight = hexData.value.features\n              .filter(\n                (d) =>\n                  d.properties.level &&\n                  d.properties.level >= 1 &&\n                  d.properties.level <= 5 &&\n                  d.geometry &&\n                  d.geometry.type === 'Polygon'\n              )\n              .map((feature) => {\n                const level = feature.properties.level;\n                const height = levelToHeight(level);\n\n                // 保持原始座標格式 [lng, lat]，高度通過屬性設置\n                return {\n                  ...feature,\n                  properties: {\n                    ...feature.properties,\n                    base_height: height,\n                    color: getColorByLevel(level),\n                  },\n                };\n              });\n\n            console.log(\n              '[MapTab] MapLibre GL 3D - 有效的 features 數量:',\n              featuresWithHeight.length\n            );\n\n            // 添加 GeoJSON 源\n            maplibreMap.addSource('hexagons-3d', {\n              type: 'geojson',\n              data: {\n                type: 'FeatureCollection',\n                features: featuresWithHeight,\n              },\n            });\n\n            // 添加填充圖層\n            maplibreMap.addLayer({\n              id: 'hexagons-3d-fill',\n              type: 'fill-extrusion',\n              source: 'hexagons-3d',\n              paint: {\n                'fill-extrusion-color': ['get', 'color'],\n                'fill-extrusion-height': ['get', 'base_height'],\n                'fill-extrusion-base': 0,\n                'fill-extrusion-opacity': 0.8,\n              },\n            });\n\n            // 不添加邊框圖層（移除白色邊框）\n\n            // 添加點擊事件\n            maplibreMap.on('click', 'hexagons-3d-fill', (e) => {\n              const properties = e.features[0].properties;\n              console.log('[MapTab] MapLibre GL - 點擊的實體信息:', properties);\n\n              // 創建彈出框\n              new maplibregl.Popup()\n                .setLngLat(e.lngLat)\n                .setHTML(\n                  Object.keys(properties)\n                    .map((key) => `<strong>${key}:</strong> ${properties[key]}`)\n                    .join('<br>')\n                )\n                .addTo(maplibreMap);\n            });\n\n            // 改變鼠標樣式\n            maplibreMap.on('mouseenter', 'hexagons-3d-fill', () => {\n              maplibreMap.getCanvas().style.cursor = 'pointer';\n            });\n\n            maplibreMap.on('mouseleave', 'hexagons-3d-fill', () => {\n              maplibreMap.getCanvas().style.cursor = '';\n            });\n\n            isMapReady.value = true;\n            console.log('[MapTab] MapLibre GL 3D 地圖初始化完成');\n          });\n\n          maplibreMap.on('error', (error) => {\n            console.error('[MapTab] MapLibre GL 地圖載入錯誤:', error);\n          });\n        } catch (error) {\n          console.error('[MapTab] MapLibre GL 3D 地圖初始化失敗:', error);\n        }\n      };\n\n      /**\n       * 🗺️ 繪製六角形網格（使用 ratio_China 數據）\n       */\n      const drawHexGrid = () => {\n        if (!g || !hexData.value || !path) {\n          console.error(\n            '[MapTab] 無法繪製六角形網格: g=',\n            !!g,\n            'hexData=',\n            !!hexData.value,\n            'path=',\n            !!path\n          );\n          return;\n        }\n\n        try {\n          console.log('[MapTab] 開始繪製六角形網格 GeoJSON');\n\n          // 先清除舊的圖層\n          g.selectAll('.hex-grid').remove();\n\n          // 過濾掉人口數為0或ratio_China為0或沒有level的區域\n          const validFeatures = hexData.value.features.filter(\n            (d) =>\n              d.properties['人口數'] &&\n              d.properties['人口數'] > 0 &&\n              d.properties['ratio_China'] &&\n              d.properties['ratio_China'] > 0 &&\n              d.properties['level'] &&\n              d.properties['level'] >= 1 &&\n              d.properties['level'] <= 5\n          );\n\n          console.log('[MapTab] 使用 level 分類數據:', {\n            total: hexData.value.features.length,\n            valid: validFeatures.length, // 人口數 > 0 且 ratio_China > 0 且有 level\n          });\n\n          // 顏色方案：5級，基於中國國旗紅色 #DE2910 的漸變（淺→深）\n          const colors = [\n            '#f9d5d3', // level 1 - 很淺（中國紅的淡化版）\n            '#f4a9a3', // level 2 - 淺\n            '#ee6c5e', // level 3 - 中\n            '#de2910', // level 4 - 中國國旗紅\n            '#a51f0c', // level 5 - 深（中國紅的深化版）\n          ];\n\n          // 顏色映射函數：直接根據 level (1-5) 返回顏色\n          const getColor = (level) => {\n            if (!level || level < 1 || level > 5) return '#f0f0f0'; // 無數據的顏色\n            return colors[level - 1]; // level 1-5 對應 colors[0-4]\n          };\n\n          // 計算各級數量（根據 level 統計）\n          const classCounts = new Array(colors.length).fill(0);\n          validFeatures.forEach((d) => {\n            const level = d.properties['level'];\n            if (level >= 1 && level <= 5) {\n              classCounts[level - 1]++; // level 1-5 對應 classCounts[0-4]\n            }\n          });\n\n          // 按 level 排序（只考慮人口數 > 0 且 ratio_China > 0 且有 level 的區域）\n          const sortedHexes = validFeatures.sort((a, b) => {\n            const levelA = a.properties['level'] || 0;\n            const levelB = b.properties['level'] || 0;\n            return levelA - levelB;\n          });\n\n          console.log('[DEBUG] 總共要繪製的六角形網格數:', sortedHexes.length);\n          console.log(\n            '[DEBUG] 前 5 個網格:',\n            sortedHexes.slice(0, 5).map((d) => ({\n              level: d.properties['level'],\n              ratio_China: d.properties['ratio_China'],\n              color: getColor(d.properties['level']),\n            }))\n          );\n\n          // Map 模式：使用地圖投影繪製（使用 GeoJSON coordinates）\n          console.log('[MapTab] 使用 Map 模式繪製（地圖投影）');\n          console.log('[MapTab] path generator:', !!path, 'g:', !!g);\n\n          // 繪製所有六角形網格\n          const hexPaths = g\n            .selectAll('.hex-grid')\n            .data(sortedHexes)\n            .enter()\n            .append('path')\n            .attr('d', path)\n            .attr('class', 'hex-grid')\n            .attr('fill', (d) => getColor(d.properties['level']))\n            .attr('fill-opacity', 0.8)\n            .attr('stroke', '#ffffff')\n            .attr('stroke-width', 0.5)\n            .style('cursor', 'pointer');\n\n          console.log('[DEBUG] 繪製了多少個 path 元素:', hexPaths.size());\n\n          hexPaths\n            .on('mouseover', function (event, d) {\n              d3.select(this).attr('fill-opacity', 1).attr('stroke-width', 2);\n              if (tooltip) {\n                const properties = d.properties;\n                // 格式化小數值為易讀格式\n                const formatValue = (key, value) => {\n                  if (value === null || value === undefined) return 'N/A';\n                  // 對於 ratio 開頭的欄位，格式化為小數\n                  if (key.startsWith('ratio_') && typeof value === 'number') {\n                    if (value === 0) return '0';\n                    if (value < 0.0001) {\n                      return value.toExponential(2);\n                    }\n                    if (value < 0.01) {\n                      return value.toFixed(5);\n                    }\n                    return value.toFixed(4);\n                  }\n                  return value;\n                };\n                // 顯示所有 properties 欄位\n                let tooltipHTML = '';\n                Object.keys(properties).forEach((key) => {\n                  const value = properties[key];\n                  tooltipHTML += `<div><strong>${key}:</strong> ${formatValue(key, value)}</div>`;\n                });\n                tooltip.innerHTML = tooltipHTML;\n                const [mouseX, mouseY] = d3.pointer(event, mapContainer.value);\n                tooltip.style.left = mouseX + 10 + 'px';\n                tooltip.style.top = mouseY - 10 + 'px';\n                tooltip.style.opacity = 1;\n              }\n            })\n            .on('mousemove', function (event) {\n              if (tooltip) {\n                const [mouseX, mouseY] = d3.pointer(event, mapContainer.value);\n                tooltip.style.left = mouseX + 10 + 'px';\n                tooltip.style.top = mouseY - 10 + 'px';\n              }\n            })\n            .on('mouseout', function () {\n              d3.select(this).attr('fill-opacity', 0.8).attr('stroke-width', 0.5);\n              if (tooltip) {\n                tooltip.style.opacity = 0;\n              }\n            });\n\n          // 繪製圖例\n          drawLegend(colors, classCounts);\n\n          console.log('[MapTab] 六角形網格（地圖模式）繪製完成');\n          console.log('  - 使用 level 分類 (1-5)');\n          console.log('  - SVG 中的 path 元素數量:', g.selectAll('path').size());\n          console.log('  - hex-grid class 元素數量:', g.selectAll('.hex-grid').size());\n        } catch (error) {\n          console.error('[MapTab] 登革熱網格繪製失敗:', error);\n        }\n      };\n\n      /**\n       * 🎨 繪製圖例\n       */\n      const drawLegend = (colors, classCounts) => {\n        if (!svg || !mapContainer.value) return;\n\n        // 移除舊的圖例\n        svg.selectAll('.legend').remove();\n\n        // 圖例尺寸（增加寬度和高度以改善間距）\n        const legendWidth = 280;\n        const legendHeight = 24;\n        const padding = 15;\n        const labelSpacing = 28; // 標籤之間的垂直間距\n\n        // 計算右下角位置（使用容器實際尺寸）\n        const rect = mapContainer.value.getBoundingClientRect();\n        const svgWidth = rect.width;\n        const svgHeight = rect.height;\n        const legendX = svgWidth - legendWidth - padding;\n        const legendY = svgHeight - legendHeight - 120; // 留出更多標籤空間\n\n        // 創建圖例組（固定在 viewport，不受 zoom 影響）\n        const legend = svg\n          .append('g')\n          .attr('class', 'legend')\n          .attr('data-legend-x', legendX)\n          .attr('data-legend-y', legendY)\n          .attr('transform', `translate(${legendX}, ${legendY})`);\n\n        // 繪製每個顏色塊\n        legend\n          .selectAll('.legend-color')\n          .data(colors)\n          .enter()\n          .append('rect')\n          .attr('class', 'legend-color')\n          .attr('x', (d, i) => i * (legendWidth / colors.length))\n          .attr('y', 0)\n          .attr('width', legendWidth / colors.length)\n          .attr('height', legendHeight)\n          .attr('fill', (d) => d)\n          .attr('stroke', '#333')\n          .attr('stroke-width', 1);\n\n        // 添加 level 標籤 (1-5)\n        const levels = [1, 2, 3, 4, 5];\n        legend\n          .selectAll('.legend-label')\n          .data(levels)\n          .enter()\n          .append('text')\n          .attr('class', 'legend-label')\n          .attr('x', (d, i) => (i + 0.5) * (legendWidth / levels.length))\n          .attr('y', legendHeight + labelSpacing)\n          .attr('font-size', '12px')\n          .attr('fill', '#333')\n          .attr('text-anchor', 'middle')\n          .text((d) => `Level ${d}`);\n\n        // 添加各級數量標籤\n        if (classCounts) {\n          legend\n            .selectAll('.legend-count')\n            .data(classCounts)\n            .enter()\n            .append('text')\n            .attr('class', 'legend-count')\n            .attr('x', (d, i) => (i + 0.5) * (legendWidth / classCounts.length))\n            .attr('y', legendHeight + labelSpacing * 2)\n            .attr('font-size', '11px')\n            .attr('fill', '#666')\n            .attr('text-anchor', 'middle')\n            .text((d) => d);\n        }\n\n        // 添加標題\n        legend\n          .append('text')\n          .attr('class', 'legend-title')\n          .attr('x', legendWidth / 2)\n          .attr('y', -12)\n          .attr('font-size', '13px')\n          .attr('font-weight', 'bold')\n          .attr('fill', '#333')\n          .attr('text-anchor', 'middle')\n          .text('ratio_China (比例值) - Level');\n      };\n\n      /**\n       * 🏗️ 創建地圖實例\n       * 初始化 D3.js 地圖並設定基本配置\n       */\n      const createMap = () => {\n        if (!mapContainer.value) return false;\n\n        const rect = mapContainer.value.getBoundingClientRect();\n        if (rect.width === 0 || rect.height === 0) {\n          console.warn('[MapTab] 容器尺寸為零，延遲初始化');\n          return false;\n        }\n\n        try {\n          const width = rect.width;\n          const height = rect.height;\n\n          // 台灣中心位置：緯度 23.5°, 經度 121°\n\n          // 創建 SVG 元素\n          svg = d3\n            .select(mapContainer.value)\n            .append('svg')\n            .attr('width', width)\n            .attr('height', height)\n            .style('background', '#ffffff'); // 白色背景\n\n          // 創建投影 - 麥卡托投影，聚焦在台灣\n          projection = d3\n            .geoMercator()\n            .center([121, 23.5]) // 中心點在台灣\n            .scale(12000) // 更大的縮放比例，更聚焦在台灣\n            .translate([width / 2, height / 2]);\n\n          // 創建路徑生成器\n          path = d3.geoPath().projection(projection);\n\n          // 創建容器組\n          g = svg.append('g');\n\n          // 設置縮放行為\n          zoom = d3\n            .zoom()\n            .scaleExtent([0.5, 50]) // 允許縮放 0.5x 到 50x\n            .on('zoom', (event) => {\n              if (g && g.node() && g.node().parentNode) {\n                g.attr('transform', event.transform);\n              }\n            });\n\n          svg.call(zoom);\n\n          // 重置縮放狀態，確保切換模式時不會受到之前模式的影響\n          svg.call(zoom.transform, d3.zoomIdentity);\n\n          // 創建工具提示元素\n          createTooltip();\n\n          isMapReady.value = true;\n\n          // 將地圖實例傳遞給父組件\n          emit('map-ready', { svg, projection, path });\n\n          console.log('[MapTab] D3.js 地圖創建成功');\n          return true;\n        } catch (error) {\n          console.error('[MapTab] D3.js 地圖創建失敗:', error);\n          return false;\n        }\n      };\n\n      /**\n       * 🚀 初始化地圖\n       * 根據初始顯示模式創建對應的視圖\n       */\n      const initMap = async () => {\n        let attempts = 0;\n        const maxAttempts = 20;\n\n        // 根據顯示模式載入不同的數據\n        if (displayMode.value === 'map') {\n          // 地圖模式：需要載入縣市界線和六角形網格數據\n          console.log('[MapTab] 開始載入地圖模式數據...');\n          const [countyLoaded, hexLoaded] = await Promise.all([loadCountyData(), loadHexData()]);\n\n          if (!countyLoaded) {\n            console.error('[MapTab] 無法載入直轄市、縣(市)界線數據');\n            return;\n          }\n\n          if (!hexLoaded) {\n            console.error('[MapTab] 無法載入六角形網格數據');\n            return;\n          }\n\n          console.log('[MapTab] 所有數據載入完成，開始創建地圖');\n\n          const tryCreateMap = async () => {\n            if (attempts >= maxAttempts) {\n              console.error('[MapTab] 地圖初始化失敗，已達到最大嘗試次數');\n              return;\n            }\n\n            attempts++;\n            console.log(`[MapTab] 嘗試創建地圖 (${attempts}/${maxAttempts})`);\n\n            if (createMap()) {\n              console.log('[MapTab] 地圖創建成功，開始繪製圖層');\n              // 先繪製縣市界線（底層）\n              drawCounties();\n              // 再繪製六角形網格（上層）\n              drawHexGrid();\n            } else {\n              console.log('[MapTab] 地圖創建失敗，100ms 後重試');\n              setTimeout(tryCreateMap, 100);\n            }\n          };\n\n          tryCreateMap();\n        } else if (displayMode.value === 'grid') {\n          // Grid 模式：需要載入六角形網格數據，需要地圖投影來繪製\n          console.log('[MapTab] 開始載入網格模式數據...');\n          const hexLoaded = await loadHexData();\n\n          if (!hexLoaded) {\n            console.error('[MapTab] 無法載入六角形網格數據');\n            return;\n          }\n\n          console.log('[MapTab] 數據載入完成，開始創建網格視圖');\n\n          const tryCreateGrid = async () => {\n            if (attempts >= maxAttempts) {\n              console.error('[MapTab] 網格初始化失敗，已達到最大嘗試次數');\n              return;\n            }\n\n            attempts++;\n            console.log(`[MapTab] 嘗試創建網格視圖 (${attempts}/${maxAttempts})`);\n\n            if (createMap()) {\n              console.log('[MapTab] 網格視圖創建成功，開始繪製六角形網格');\n              drawHexGridOnly();\n            } else {\n              console.log('[MapTab] 網格視圖創建失敗，100ms 後重試');\n              setTimeout(tryCreateGrid, 100);\n            }\n          };\n\n          tryCreateGrid();\n        } else if (displayMode.value === 'cesium3d') {\n          // CesiumJS 3D 模式\n          console.log('[MapTab] 開始載入 CesiumJS 3D 模式數據...');\n          const hexLoaded = await loadHexData();\n\n          if (!hexLoaded) {\n            console.error('[MapTab] 無法載入六角形網格數據');\n            return;\n          }\n\n          console.log('[MapTab] 數據載入完成，開始初始化 CesiumJS 3D 地圖');\n          cleanupOtherViews();\n          await initCesium3D();\n        } else if (displayMode.value === 'maplibre3d') {\n          // MapLibre 3D 模式\n          console.log('[MapTab] 開始載入 MapLibre 3D 模式數據...');\n          const hexLoaded = await loadHexData();\n\n          if (!hexLoaded) {\n            console.error('[MapTab] 無法載入六角形網格數據');\n            return;\n          }\n\n          console.log('[MapTab] 數據載入完成，開始初始化 MapLibre 3D 地圖');\n          cleanupOtherViews();\n          await initMapLibre3D();\n        }\n      };\n\n      // 處理窗口大小調整（重新繪製整個地圖）\n      let resizeTimer = null;\n      const handleResize = () => {\n        // 防抖處理，避免頻繁重繪\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n        resizeTimer = setTimeout(() => {\n          console.log('[MapTab] 窗口大小調整，重新繪製地圖');\n          initMap();\n        }, 300);\n      };\n\n      // 🧹 生命週期：組件掛載\n      onMounted(() => {\n        nextTick(() => {\n          initMap();\n        });\n\n        // 監聽窗口大小調整\n        window.addEventListener('resize', handleResize);\n      });\n\n      // 🧹 生命週期：組件卸載\n      onUnmounted(() => {\n        // 清除 resize timer\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n\n        // 移除 resize 監聽器\n        window.removeEventListener('resize', handleResize);\n\n        if (svg) {\n          // 完全移除 zoom 行為\n          try {\n            if (zoom) {\n              svg.on('.zoom', null);\n              svg.call(zoom.on('zoom', null));\n            }\n          } catch (e) {\n            console.warn('[MapTab] 移除 zoom 行為時出錯:', e);\n          }\n          svg.remove();\n          svg = null;\n          g = null;\n          zoom = null;\n        }\n\n        // 清理工具提示\n        if (tooltip) {\n          tooltip.remove();\n          tooltip = null;\n        }\n\n        // 清理 Cesium Viewer\n        if (cesiumViewer) {\n          try {\n            cesiumViewer.destroy();\n          } catch (e) {\n            console.warn('[MapTab] 清理 Cesium Viewer 時出錯:', e);\n          }\n          cesiumViewer = null;\n        }\n\n        // 清理 MapLibre Map\n        if (maplibreMap) {\n          try {\n            maplibreMap.remove();\n          } catch (e) {\n            console.warn('[MapTab] 清理 MapLibre Map 時出錯:', e);\n          }\n          maplibreMap = null;\n        }\n\n        projection = null;\n        path = null;\n        zoom = null;\n        g = null;\n        isMapReady.value = false;\n      });\n\n      // 📤 返回組件公開的屬性和方法\n      return {\n        mapContainer,\n        mapContainerId,\n        displayMode,\n        toggleDisplayMode,\n      };\n    },\n  };\n</script>\n\n<template>\n  <!-- 🗺️ 地圖主容器 -->\n  <div id=\"map-container\" class=\"h-100 w-100 position-relative bg-transparent z-0\">\n    <!-- 🗺️ Leaflet 地圖容器 -->\n    <div :id=\"mapContainerId\" ref=\"mapContainer\" class=\"h-100 w-100\"></div>\n\n    <!-- 🎛️ 左側中間控制面板 -->\n    <div\n      class=\"position-absolute\"\n      style=\"top: 50%; left: 0; transform: translateY(-50%); z-index: 1000; padding: 1rem\"\n    >\n      <div class=\"bg-dark bg-opacity-75 rounded-3 p-3\">\n        <!-- 🎛️ 顯示模式選擇區域 -->\n        <div class=\"\">\n          <div class=\"d-flex flex-column gap-1\">\n            <button\n              type=\"button\"\n              class=\"btn border-0 my-country-btn my-font-sm-white px-4 py-3\"\n              :class=\"[displayMode === 'map' ? 'active' : '']\"\n              @click=\"toggleDisplayMode('map')\"\n            >\n              地圖模式\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn border-0 my-country-btn my-font-sm-white px-4 py-3\"\n              :class=\"[displayMode === 'grid' ? 'active' : '']\"\n              @click=\"toggleDisplayMode('grid')\"\n            >\n              網格模式\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn border-0 my-country-btn my-font-sm-white px-4 py-3\"\n              :class=\"[displayMode === 'cesium3d' ? 'active' : '']\"\n              @click=\"toggleDisplayMode('cesium3d')\"\n            >\n              CesiumJS 3D模式\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn border-0 my-country-btn my-font-sm-white px-4 py-3\"\n              :class=\"[displayMode === 'maplibre3d' ? 'active' : '']\"\n              @click=\"toggleDisplayMode('maplibre3d')\"\n            >\n              MapLibre 3D模式\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n  @import '../assets/css/common.css';\n\n  #map-container {\n    overflow: hidden;\n  }\n\n  /* CesiumJS 容器樣式 */\n  :deep(.cesium-viewer) {\n    width: 100%;\n    height: 100%;\n  }\n\n  /* MapLibre GL 容器樣式 */\n  :deep(.maplibregl-map) {\n    width: 100%;\n    height: 100%;\n  }\n\n  :deep(.maplibregl-popup-content) {\n    background-color: rgba(0, 43, 127, 0.95);\n    color: #ffc61e;\n    border: 2px solid #ffc61e;\n    padding: 10px;\n    border-radius: 4px;\n  }\n\n  :deep(.leaflet-container) {\n    background: #ffffff; /* 白色背景 */\n  }\n\n  :deep(.leaflet-popup-content-wrapper) {\n    background: rgba(0, 43, 127, 0.95); /* 諾魯深藍色半透明 */\n    color: #ffc61e; /* 金黃色文字 */\n    border: 2px solid #ffc61e; /* 金黃色邊框 */\n  }\n\n  :deep(.leaflet-popup-tip) {\n    background: rgba(0, 43, 127, 0.95); /* 諾魯深藍色半透明 */\n  }\n\n  :deep(.leaflet-tooltip) {\n    background-color: rgba(0, 43, 127, 0.95) !important; /* 諾魯深藍色 */\n    color: #ffc61e !important; /* 金黃色文字 */\n    border: 1px solid #ffc61e !important; /* 金黃色邊框 */\n    font-size: 14px;\n    padding: 8px 12px;\n    border-radius: 4px;\n    line-height: 1.4;\n  }\n\n  :deep(.map-tooltip) {\n    background-color: #333; /* 深灰色背景 */\n    color: #fff; /* 白色文字 */\n    border: none; /* 無邊框 */\n  }\n</style>\n","/**\n * 📦 數據存儲模組 (Data Store Module)\n *\n * 管理城市圖層數據和地圖導航功能\n * 使用 Pinia 狀態管理系統和 Vue 3 Composition API\n */\n\n// 核心依賴\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\n\n/**\n * 🏪 數據存儲商店定義 (Data Store Definition)\n *\n * 使用 Pinia 的 defineStore 創建一個名為 'data' 的狀態管理商店。\n * 採用 Composition API 語法，提供更好的 TypeScript 支援和代碼組織。\n *\n * @returns {Object} 包含所有狀態和方法的商店對象\n */\nexport const useDataStore = defineStore(\n  'data', // 商店唯一標識符\n  () => {\n    // ------------------------------------------------------------\n    // 地圖實例管理\n    const mapInstance = ref(null);\n\n    const setMapInstance = (map) => {\n      mapInstance.value = map;\n    };\n\n    return {\n      mapInstance, // 地圖實例\n      setMapInstance, // 設定地圖實例\n    };\n  },\n  {\n    persist: true,\n  }\n);\n","import { render } from \"./MapTab.vue?vue&type=template&id=00806bff&scoped=true\"\nimport script from \"./MapTab.vue?vue&type=script&lang=js\"\nexport * from \"./MapTab.vue?vue&type=script&lang=js\"\n\nimport \"./MapTab.vue?vue&type=style&index=0&id=00806bff&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-00806bff\"]])\n\nexport default __exports__","import { render } from \"./HomeView.vue?vue&type=template&id=3342f0b3\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=3342f0b3&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/**\n * 🚀 Vue Router 路由配置\n *\n * 長照空間分析系統的路由管理\n * 使用 Vue Router 4 進行單頁應用程式路由控制\n *\n * @author 長照空間分析團隊\n * @version 1.0.0\n */\n\nimport { createRouter, createWebHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\n\n/**\n * 📍 路由配置陣列\n * 定義應用程式的所有路由規則\n */\nconst routes = [\n  {\n    path: '/', // 🏠 根路徑\n    name: 'Home', // 路由名稱\n    component: HomeView, // 對應的 Vue 組件\n  },\n];\n\n/**\n * 🛣️ 路由器實例創建\n *\n * 配置說明：\n * - history: 使用 HTML5 History API 模式\n * - base: 設定應用程式的基礎路徑為 '/30DayMapChallenge-25_Hexagons/'\n * - routes: 路由配置陣列\n */\nconst router = createRouter({\n  history: createWebHistory('/30DayMapChallenge-25_Hexagons/'),\n  routes,\n});\n\nexport default router;\n","/**\n * 🚀 應用程式主入口文件 (Main Application Entry Point)\n *\n * 本文件是整個 Vue.js 應用程式的啟動入口，負責初始化所有核心系統和第三方依賴。\n * 採用模組化設計，確保各系統間的依賴關係清晰明確。\n *\n * 📋 主要功能模組：\n * 1. 🎨 樣式系統初始化 - Bootstrap 5 + 自定義主題 + 第三方 UI 庫樣式\n * 2. 🧩 Vue 3 應用程式核心 - 使用 Composition API 的現代化 Vue 架構\n * 3. 🗺️ 路由系統配置 - Vue Router 4 單頁應用程式導航管理\n * 4. 📦 狀態管理系統 - Pinia 全域狀態管理和數據持久化\n * 5. 🌍 DOM 掛載與渲染 - 將應用程式掛載到 HTML 容器中\n * 6. 🔧 第三方庫整合 - D3.js 地圖、Font Awesome 圖示、Bootstrap 組件\n *\n * 🏗️ 技術架構：\n * - Vue 3.3+ (Composition API + <script setup> 語法)\n * - Vue Router 4 (聲明式路由配置)\n * - Pinia 2+ (輕量級狀態管理，替代 Vuex)\n * - Bootstrap 5.3+ (響應式 UI 框架)\n * - D3.js 7+ (數據可視化和地圖繪製庫)\n * - Font Awesome 6+ (向量圖示庫)\n *\n * 🔄 初始化流程：\n * 1. 載入所有必要的樣式和 JavaScript 依賴\n * 2. 創建 Vue 應用程式實例\n * 3. 配置並註冊路由系統\n * 4. 配置並註冊狀態管理系統\n * 5. 將應用程式掛載到 DOM 元素\n * 6. 輸出初始化完成日誌\n *\n * 📁 相關文件：\n * - ./App.vue - 根組件\n * - ./router/index.js - 路由配置\n * - ./stores/ - Pinia 狀態管理模組\n * - ./assets/css/ - 自定義樣式文件\n */\n\n// 🔧 Vue 核心模組引入 (Vue Core Module Imports)\nimport { createApp } from 'vue';\nimport { createPinia } from 'pinia';\n\n// 🧩 應用程式組件引入 (Application Component Imports)\nimport App from './App.vue';\nimport router from './router';\n\n// 🎨 引入第三方樣式文件 (Import Third-Party Style Files)\nimport 'bootstrap/dist/css/bootstrap.min.css'; // Bootstrap 5 CSS 框架\nimport '@fortawesome/fontawesome-free/css/all.min.css'; // Font Awesome 圖示庫\n// CesiumJS CSS 已通過 CDN 在 index.html 中引入\n\n// 🎨 引入自定義樣式文件 (Import Custom Style Files)\nimport './assets/css/common.css'; // 共用樣式（已包含變數和主題配置）\n\n// ⚙️ 引入第三方 JavaScript 文件 (Import Third-Party JavaScript Files)\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'; // Bootstrap JS（含 Popper.js）\n// 提供下拉選單、模態框、工具提示等互動功能\n\n// 🐛 調試資訊輸出 (Debug Information Output)\nconsole.log('🎨 樣式文件載入完成');\n\n// 🚀 創建並配置 Vue 應用程式實例 (Create and Configure Vue Application Instance)\nconst app = createApp(App);\n\n// 📦 創建 Pinia 狀態管理實例 (Create Pinia State Management Instance)\nconst pinia = createPinia();\n\n// 🗺️ 註冊 Vue Router 路由系統 (Register Vue Router Navigation System)\napp.use(router);\n\n// 📦 註冊 Pinia 狀態管理系統 (Register Pinia State Management System)\napp.use(pinia);\n\n// 🌍 掛載應用程式到 DOM 元素 (Mount Application to DOM Element)\n// 將 Vue 應用程式掛載到 index.html 中 id=\"app\" 的元素上\napp.mount('#app');\n\n// 🐛 應用程式啟動完成的調試資訊 (Application Startup Debug Information)\nconsole.log('🚀 空間分析視覺化平台已啟動');\nconsole.log('📦 Pinia 狀態管理已初始化');\nconsole.log('🗺️ Vue Router 路由系統已就緒');\nconsole.log('🎨 Bootstrap 5 UI 框架已載入');\nconsole.log('🗺️ D3.js 地圖庫已準備就緒');\nconsole.log('🔤 Font Awesome 圖示庫已載入');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_30DayMapChallenge_25_Hexagons\"] = self[\"webpackChunk_30DayMapChallenge_25_Hexagons\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6568); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_router_view","name","__exports__","render","_component_MapTab","onMapReady","$setup","setMapInstance","style","mapContainerId","ref","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","type","_normalizeClass","displayMode","onClick","_cache","$event","toggleDisplayMode","useDataStore","defineStore","mapInstance","map","value","persist","emits","setup","_","emit","mapContainer","svg","projection","path","zoom","g","tooltip","cesiumViewer","maplibreMap","isMapReady","Math","random","toString","substr","countyData","hexData","loadCountyData","async","console","log","countyResponse","fetch","ok","Error","status","json","features","length","error","createTooltip","existingTooltip","querySelector","remove","document","createElement","className","position","pointerEvents","opacity","padding","appendChild","loadHexData","hexResponse","drawCounties","selectAll","data","enter","append","attr","drawHexGridOnly","validFeatures","filter","d","properties","total","valid","colors","getColor","level","classCounts","Array","fill","forEach","sortedHexes","sort","a","b","levelA","levelB","slice","ratio_China","color","hexPaths","size","on","event","d3","this","formatValue","key","undefined","startsWith","toExponential","toFixed","tooltipHTML","Object","keys","innerHTML","mouseX","mouseY","left","top","drawLegend","mode","call","e","warn","transform","rect","getBoundingClientRect","width","height","center","scale","translate","scaleExtent","drawHexGrid","cleanupOtherViews","initCesium3D","initMapLibre3D","destroy","window","Cesium","Ion","defaultAccessToken","worldTerrain","createWorldTerrainAsync","Viewer","terrainProvider","baseLayerPicker","geocoder","homeButton","infoBox","sceneModePicker","selectionIndicator","timeline","animation","fullscreenButton","vrButton","navigationHelpButton","camera","setView","destination","Cartesian3","fromDegrees","orientation","heading","pitch","roll","getColorByLevel","Color","fromCssColorString","calculateHexWidth","firstHex","find","f","geometry","coordinates","coords","p1","p4","R","lat1","PI","lat4","dLat","dLon","sin","cos","c","atan2","sqrt","hexWidth","levelToHeight","feature","extrudedHeight","positions","coord","entities","add","polygon","hierarchy","material","withAlpha","outline","handler","ScreenSpaceEventHandler","scene","canvas","setInputAction","click","pickedObject","pick","defined","info","prototype","hasOwnProperty","getValue","ScreenSpaceEventType","LEFT_CLICK","maplibregl","container","version","sources","carto","tiles","tileSize","attribution","layers","source","minzoom","maxzoom","bearing","antialias","featuresWithHeight","base_height","addSource","addLayer","paint","setLngLat","lngLat","setHTML","join","addTo","getCanvas","cursor","legendWidth","legendHeight","labelSpacing","svgWidth","svgHeight","legendX","legendY","legend","i","levels","text","createMap","node","parentNode","initMap","attempts","maxAttempts","countyLoaded","hexLoaded","Promise","all","tryCreateMap","setTimeout","tryCreateGrid","resizeTimer","handleResize","clearTimeout","onMounted","nextTick","addEventListener","onUnmounted","removeEventListener","components","MapTab","dataStore","routes","component","HomeView","router","createRouter","history","createWebHistory","app","createApp","App","pinia","createPinia","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","globalThis","Function","obj","prop","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}